:root {
    --bg: #f8fafc; /* slate-50 */
    --panel: #ffffff;
    --border: #e2e8f0; /* slate-200 */
    --text: #0f172a; /* slate-900 */
    --muted: #64748b; /* slate-500 */
    --muted-2: #475569; /* slate-600 */
    --accent: #0f172a;
    --focus: #94a3b8; /* slate-400 */
    --pin-default: #2563eb; /* blue-600 */
}

* {
    box-sizing: border-box;
}

html, body {
    height: 100%;
    margin: 0;
}

body {
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
    color: var(--text);
    background: var(--bg);
}

.app {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
}

header { position: sticky; top: 0; z-index: 10; background: var(--panel); border-bottom: 1px solid var(--border); display: flex; align-items: center; justify-content: space-between; padding: 12px 16px; gap: 12px; }
header h1 { font-size: 16px; margin: 0; font-weight: 650; letter-spacing: .2px; }

/* Layout */
.grid { display: grid; min-height: calc(100vh - 49px); }
/* Portrait (mobile): map on top, panel bottom */
@media (orientation: portrait) {
    .grid { grid-template-rows: 52vh 48vh; grid-template-columns: 1fr; }
    .map-area { border-bottom: 1px solid var(--border); }
}
/* Landscape/desktop: map left, panel right */
@media (orientation: landscape) {
    .grid { grid-template-columns: minmax(0,1fr) 420px; grid-template-rows: 1fr; }
    .panel { border-left: 1px solid var(--border); }
}
@media (min-width: 980px) and (orientation: portrait) {
    /* Wider portrait screens: still stack but give map more room */
    .grid { grid-template-rows: 58vh 42vh; }
}

.map-area, .panel { background: var(--panel); }
#map { height: 100%; width: 100%; }

.list { height: 100%; overflow: auto; }
.empty { padding: 24px; color: var(--muted); font-size: 14px; }
.count { padding: 8px 12px; border-top: 1px solid var(--border); color: var(--muted); font-size: 12px; }

.item { padding: 12px; cursor: pointer; display: flex; gap: 12px; align-items: flex-start; transition: background .15s; }
.item:hover { background: #f8fafc; }
.item.selected { background: #f1f5f9; }

.thumb { position: relative; width: 56px; height: 56px; border-radius: 12px; overflow: hidden; border: 1px solid var(--border); flex: 0 0 auto; }
.thumb img { width: 100%; height: 100%; object-fit: cover; display: block; }
.thumb .dot { position: absolute; right: -4px; top: -4px; width: 16px; height: 16px; border-radius: 999px; border: 2px solid #fff; background: var(--pin-default); }
.meta { min-width: 0; flex: 1; }
.title { font-weight: 650; margin: 0; font-size: 15px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.address { display: inline-block; margin-top: 4px; font-size: 13px; color: var(--muted-2); text-decoration: underline; text-underline-offset: 2px; }
.chips { display: flex; flex-wrap: wrap; gap: 10px; margin-top: 8px; font-size: 13px; }
.chip { text-decoration: underline; cursor: pointer; color: var(--muted-2); }

/* Custom divIcon “pin” (CSS var --c controls color) */
.pin { position: relative; width: 20px; height: 20px; border-radius: 9999px; background: var(--c, var(--pin-default)); border: 2px solid white; box-shadow: 0 2px 6px rgba(0,0,0,.25); }
.pin::after { content: ""; position: absolute; left: 50%; bottom: -6px; transform: translateX(-50%) rotate(45deg); width: 12px; height: 12px; background: var(--c, var(--pin-default)); border-right: 2px solid white; border-bottom: 2px solid white; }
.pin.selected { outline: 6px solid rgba(37, 99, 235, .25); }

.popup-title { font-weight: 650; margin-bottom: 2px; }
.popup-link { font-size: 13px; }